<!DOCTYPE html>
<html lang="th">
<head>
<meta charset="UTF-8">
<title>OBIXConfig Doctor</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
<script>
function copyText(id) {
    const text = document.getElementById(id).innerText;
    navigator.clipboard.writeText(text);
    alert("‡∏Ñ‡∏±‡∏î‡∏•‡∏≠‡∏Å‡πÑ‡∏õ‡πÉ‡∏ä‡πâ‡πÉ‡∏ô Betaflight ‡πÑ‡∏î‡πâ‡πÅ‡∏•‡πâ‡∏ß");
}
</script>
</head>

<body>
<div class="container">
<h1>üõ† OBIXConfig Doctor</h1>
<p class="subtitle">‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡∏Ñ‡πà‡∏≤ PID + Filter + ‡πÉ‡∏ö‡∏û‡∏±‡∏î‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö FPV Drone</p>

<form method="POST" class="form-card">
    <label>‡∏Ç‡∏ô‡∏≤‡∏î‡πÇ‡∏î‡∏£‡∏ô (‡∏ô‡∏¥‡πâ‡∏ß)</label>
    <input type="number" name="size" value="5" required>

    <label>‡πÅ‡∏ö‡∏ï‡πÄ‡∏ï‡∏≠‡∏£‡∏µ‡πà</label>
    <select name="battery">
        <option value="4S">4S</option>
        <option value="6S">6S</option>
    </select>

    <label>‡∏™‡πÑ‡∏ï‡∏•‡πå‡∏Å‡∏≤‡∏£‡∏ö‡∏¥‡∏ô</label>
    <select name="style">
        <option value="freestyle">Freestyle</option>
        <option value="longrange">Long Range / Cinematic</option>
        <option value="racing">Racing</option>
    </select>

    <label>‡∏Ç‡∏ô‡∏≤‡∏î‡πÉ‡∏ö‡∏û‡∏±‡∏î (‡∏ô‡∏¥‡πâ‡∏ß)</label>
    <input type="number" step="0.1" name="prop_size" value="5" required>

    <label>‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÉ‡∏ö</label>
    <select name="blades">
        <option value="2">2 ‡πÉ‡∏ö</option>
        <option value="3" selected>3 ‡πÉ‡∏ö</option>
        <option value="4">4 ‡πÉ‡∏ö</option>
    </select>

    <label>Pitch ‡πÉ‡∏ö‡∏û‡∏±‡∏î</label>
    <input type="number" step="0.1" name="pitch" value="4.0" required>

    <button type="submit">‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå</button>
</form>

{% if analysis %}
<div class="result-card">
<h2>üîç ‡∏ú‡∏•‡∏Å‡∏≤‡∏£‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå</h2>

<p><strong>{{ analysis.overview }}</strong></p>

<h3>üí® ‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡πÉ‡∏ö‡∏û‡∏±‡∏î</h3>
<p>{{ analysis.prop_analysis.summary }}</p>
<ul>
    <li>Noise Level: {{ analysis.prop_analysis.impact.noise_level }}</li>
    <li>Motor Load: {{ analysis.prop_analysis.impact.motor_load }}</li>
    <li>Recommendation: {{ analysis.prop_analysis.recommendation }}</li>
</ul>

<h3>‚öôÔ∏è PID (‡∏Ñ‡πà‡∏≤‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥)</h3>
<pre id="pid">
ROLL  P {{ analysis.pid.roll.p }}  I {{ analysis.pid.roll.i }}  D {{ analysis.pid.roll.d }}
PITCH P {{ analysis.pid.pitch.p }} I {{ analysis.pid.pitch.i }} D {{ analysis.pid.pitch.d }}
YAW   P {{ analysis.pid.yaw.p }}   I {{ analysis.pid.yaw.i }}
</pre>
<button onclick="copyText('pid')">Copy PID</button>

<h3>üß† Filter</h3>
<pre id="filter">
Gyro LPF2: {{ analysis.filter.gyro_lpf2 }} Hz
D-Term LPF1: {{ analysis.filter.dterm_lpf1 }} Hz
Dynamic Notch: {{ analysis.filter.dyn_notch }}
</pre>
<button onclick="copyText('filter')">Copy Filter</button>

<h3>üí° ‡∏Ñ‡∏≥‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏°</h3>
<ul>
{% for ex in analysis.extra_tips %}
<li>{{ ex }}</li>
{% endfor %}
</ul>

</div>
{% endif %}

<footer>
OBIXConfig Doctor ‚Ä¢ ‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡∏à‡∏£‡∏¥‡∏á‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Betaflight
</footer>
</div>
</body>
</html>
