<!DOCTYPE html>
<html lang="th">
<head>
<meta charset="UTF-8">
<title>OBIXConfig Doctor</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">

<script>
function copyText(id) {
    const text = document.getElementById(id).innerText;
    navigator.clipboard.writeText(text);
    alert("‡∏Ñ‡∏±‡∏î‡∏•‡∏≠‡∏Å‡πÑ‡∏õ‡πÉ‡∏ä‡πâ‡πÉ‡∏ô Betaflight ‡πÑ‡∏î‡πâ‡πÅ‡∏•‡πâ‡∏ß");
}
</script>
</head>

<body>
<div class="container">

<h1>üõ† OBIXConfig Doctor</h1>
<p class="subtitle">‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡∏Ñ‡πà‡∏≤ PID & Filter ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö FPV Drone</p>

<form method="POST" class="form-card">
    <label>‡∏Ç‡∏ô‡∏≤‡∏î‡πÇ‡∏î‡∏£‡∏ô (‡∏ô‡∏¥‡πâ‡∏ß)</label>
    <input type="number" name="size" placeholder="‡πÄ‡∏ä‡πà‡∏ô 5" required>

    <label>‡πÅ‡∏ö‡∏ï‡πÄ‡∏ï‡∏≠‡∏£‡∏µ‡πà</label>
    <select name="battery">
        <option value="4S">4S</option>
        <option value="6S">6S</option>
    </select>

    <label>‡∏™‡πÑ‡∏ï‡∏•‡πå‡∏Å‡∏≤‡∏£‡∏ö‡∏¥‡∏ô</label>
    <select name="style">
        <option value="freestyle">Freestyle</option>
        <option value="longrange">Long Range / Cinematic</option>
        <option value="racing">Racing</option>
    </select>

    <button type="submit">‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå</button>
</form>

{% if analysis %}
<div class="result-card">
<h2>üîç ‡∏ú‡∏•‡∏Å‡∏≤‡∏£‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå</h2>

<p><strong>{{ analysis.overview }}</strong></p>

<h3>‡πÅ‡∏ô‡∏ß‡∏Ñ‡∏¥‡∏î‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤</h3>
<ul>
{% for tip in analysis.basic_tips %}
<li>{{ tip }}</li>
{% endfor %}
</ul>

<h3>‚öôÔ∏è PID (‡∏Ñ‡πà‡∏≤‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥)</h3>
<pre id="pid">
ROLL  P {{ analysis.pid.roll.p }}  I {{ analysis.pid.roll.i }}  D {{ analysis.pid.roll.d }}
PITCH P {{ analysis.pid.pitch.p }} I {{ analysis.pid.pitch.i }} D {{ analysis.pid.pitch.d }}
YAW   P {{ analysis.pid.yaw.p }}   I {{ analysis.pid.yaw.i }}
</pre>
<button onclick="copyText('pid')">Copy PID</button>

<h3>üß† Filter</h3>
<pre id="filter">
Gyro LPF2: {{ analysis.filter.gyro_lpf2 }} Hz
D-Term LPF1: {{ analysis.filter.dterm_lpf1 }} Hz
Dynamic Notch: {{ analysis.filter.dyn_notch }}
</pre>
<button onclick="copyText('filter')">Copy Filter</button>

<h3>üí° ‡∏Ñ‡∏≥‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏°</h3>
<ul>
{% for ex in analysis.extra_tips %}
<li>{{ ex }}</li>
{% endfor %}
</ul>

</div>
{% endif %}

<footer>
OBIXConfig Doctor ‚Ä¢ ‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡∏à‡∏£‡∏¥‡∏á‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Betaflight
</footer>

</div>
</body>
</html>
