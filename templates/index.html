<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <title>OBIXConfig Doctor</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">

    <script>
        function copyText(id) {
            const text = document.getElementById(id).innerText;
            navigator.clipboard.writeText(text);
            alert("‡∏Ñ‡∏±‡∏î‡∏•‡∏≠‡∏Å‡πÑ‡∏õ‡πÉ‡∏ä‡πâ‡πÉ‡∏ô Betaflight CLI ‡πÅ‡∏•‡πâ‡∏ß");
        }
    </script>
</head>
<body>

<div class="container">
    <h1>üõ† OBIXConfig Doctor</h1>
    <p class="subtitle">
        ‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå & ‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡∏Ñ‡πà‡∏≤ PID / Filter ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÇ‡∏î‡∏£‡∏ô FPV<br>
        ‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡πÑ‡∏î‡πâ‡∏à‡∏£‡∏¥‡∏á ‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏ó‡∏±‡πâ‡∏á‡∏°‡∏∑‡∏≠‡πÉ‡∏´‡∏°‡πà‡πÅ‡∏•‡∏∞‡∏°‡∏∑‡∏≠‡πÄ‡∏Å‡πà‡∏≤
    </p>

    <!-- ===== FORM ===== -->
    <form method="POST" class="form-card">
        <label>‡∏Ç‡∏ô‡∏≤‡∏î‡πÇ‡∏î‡∏£‡∏ô (‡∏ô‡∏¥‡πâ‡∏ß)</label>
        <input type="number" name="size" placeholder="‡πÄ‡∏ä‡πà‡∏ô 5" required>

        <label>‡πÅ‡∏ö‡∏ï‡πÄ‡∏ï‡∏≠‡∏£‡∏µ‡πà</label>
        <select name="battery">
            <option value="4S">4S</option>
            <option value="6S">6S</option>
        </select>

        <label>‡∏™‡πÑ‡∏ï‡∏•‡πå‡∏Å‡∏≤‡∏£‡∏ö‡∏¥‡∏ô</label>
        <select name="style">
            <option value="freestyle">Freestyle (‡∏™‡∏°‡∏î‡∏∏‡∏•)</option>
            <option value="longrange">Long Range / Cinematic</option>
            <option value="racing">Racing (‡∏ï‡∏≠‡∏ö‡∏™‡∏ô‡∏≠‡∏á‡πÑ‡∏ß)</option>
        </select>

        <button type="submit">‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå</button>
    </form>

    <!-- ===== RESULT ===== -->
    {% if analysis %}
    <div class="result-card">
        <h2>üîç ‡∏ú‡∏•‡∏Å‡∏≤‡∏£‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå</h2>

        <p><strong>‡∏†‡∏≤‡∏û‡∏£‡∏ß‡∏°:</strong><br>
        {{ analysis['overview'] }}
        </p>

        <h3>üéØ ‡πÅ‡∏ô‡∏ß‡∏Ñ‡∏¥‡∏î‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤</h3>
        <ul>
            {% for tip in analysis['basic_tips'] %}
            <li>{{ tip }}</li>
            {% endfor %}
        </ul>

        <!-- ===== PID ===== -->
        <h3>‚öôÔ∏è ‡∏Ñ‡πà‡∏≤ PID (‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥)</h3>
        <p id="pid">
P Roll: {{ analysis['pid']['roll']['p'] }}
I Roll: {{ analysis['pid']['roll']['i'] }}
D Roll: {{ analysis['pid']['roll']['d'] }}

P Pitch: {{ analysis['pid']['pitch']['p'] }}
I Pitch: {{ analysis['pid']['pitch']['i'] }}
D Pitch: {{ analysis['pid']['pitch']['d'] }}

P Yaw: {{ analysis['pid']['yaw']['p'] }}
I Yaw: {{ analysis['pid']['yaw']['i'] }}
D Yaw: {{ analysis['pid']['yaw']['d'] }}
        </p>
        <button onclick="copyText('pid')">Copy PID</button>

        <p class="hint">
        ‚Ä¢ P = ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Ñ‡∏°‡∏Ç‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏ï‡∏≠‡∏ö‡∏™‡∏ô‡∏≠‡∏á<br>
        ‚Ä¢ I = ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ô‡∏¥‡πà‡∏á / ‡∏Å‡∏≤‡∏£‡∏Ñ‡πâ‡∏≤‡∏á‡∏≠‡∏á‡∏®‡∏≤<br>
        ‚Ä¢ D = ‡∏•‡∏î‡∏≠‡∏≤‡∏Å‡∏≤‡∏£‡∏™‡∏±‡πà‡∏ô‡πÅ‡∏•‡∏∞‡∏Å‡∏£‡∏∞‡πÅ‡∏ó‡∏Å
        </p>

        <!-- ===== FILTER ===== -->
        <h3>üß† Filter (‡∏•‡∏î‡∏™‡∏±‡πà‡∏ô / ‡∏Ñ‡∏∏‡∏° Noise)</h3>
        <p id="filter">
Gyro LPF1: OFF  
Gyro LPF2: {{ analysis['filter']['gyro_lpf2'] }} Hz  

D-Term LPF1: PT1 {{ analysis['filter']['dterm_lpf1'] }} Hz  
D-Term LPF2: OFF  

Dynamic Notch: {{ analysis['filter']['dyn_notch'] }} ‡∏ï‡∏±‡∏ß
        </p>
        <button onclick="copyText('filter')">Copy Filter</button>

        <p class="hint">
        ‚Ä¢ Filter ‡∏ï‡πà‡∏≥ = ‡∏ô‡∏∏‡πà‡∏° ‡πÄ‡∏á‡∏µ‡∏¢‡∏ö ‡∏õ‡∏£‡∏∞‡∏´‡∏¢‡∏±‡∏î‡πÑ‡∏ü<br>
        ‚Ä¢ Filter ‡∏™‡∏π‡∏á = ‡∏Ñ‡∏° ‡πÄ‡∏£‡πá‡∏ß ‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏™‡∏≤‡∏¢ Racing
        </p>

        <!-- ===== EXTRA ===== -->
        <h3>üí° ‡∏Ñ‡∏≥‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏°</h3>
        <ul>
            {% for extra in analysis['extra_tips'] %}
            <li>{{ extra }}</li>
            {% endfor %}
        </ul>

        <p class="note">
            ‚ö†Ô∏è ‡∏´‡∏•‡∏±‡∏á‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡πÉ‡∏´‡∏°‡πà ‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡∏ö‡∏¥‡∏ô‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏™‡∏±‡πâ‡∏ô ‡πÜ ‡πÅ‡∏•‡∏∞‡∏à‡∏±‡∏ö‡∏°‡∏≠‡πÄ‡∏ï‡∏≠‡∏£‡πå‡πÄ‡∏ä‡πá‡∏Å‡∏Ñ‡∏ß‡∏≤‡∏°‡∏£‡πâ‡∏≠‡∏ô
        </p>
    </div>
    {% endif %}

    <footer>
        OBIXConfig Doctor ‚Ä¢ FPV Community Tool
    </footer>
</div>

</body>
</html>